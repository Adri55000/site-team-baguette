{% extends "base.html" %}
{% block title %} {{ _("Profil de %(username)s", username=user["username"]) }}{% endblock %}

{% block content %}

<div class="profile-page">

  <!-- ===== HEADER ===== -->
  <div class="profile-header">
    <img
      class="profile-avatar"
      src="{{ url_for('static', filename='avatars/' ~ (user["avatar_filename"] or 'default.png')) }}"
      alt="Avatar">

    <div class="profile-header-info">
      <h1 class="profile-username">{{ user["username"] }}</h1>
      <div class="profile-role">{{ user["role"] | capitalize }}</div>
    </div>
  </div>

  <div class="profile-content">

    {% if user["description"] %}
    <section class="profile-section">
      <h2>{{ _("À propos") }}</h2>
      <div class="profile-description">
        {{ user["description"] }}
      </div>
    </section>
    {% endif %}

    <section class="profile-section">
	  <h2>{{ _("Liens & contacts") }}</h2>

	  {% if links %}
		<div class="profile-socials profile-socials--buttons">

		  {# --- Liens externes (boutons cliquables) --- #}
		  {% for key in ["racetime", "twitch", "youtube"] %}
			{% if links.get(key) %}
			  <a
				class="social-btn"
				href="{{ links[key] }}"
				target="_blank"
				rel="noopener"
			  >
				{{ key | capitalize }}
			  </a>
			{% endif %}
		  {% endfor %}

		  {# --- Discord (bouton non cliquable) --- #}
		  {% if links.get("discord") %}
			<span class="social-btn social-btn--static">
			  Discord · {{ links["discord"] }}
			</span>
		  {% endif %}

		</div>
	  {% else %}
		<p>{{ _("Aucun lien externe.") }}</p>
	  {% endif %}
	</section>



    <div class="profile-actions">
      <a href="{{ url_for('main.home') }}" class="btn btn-secondary">
        {{ _("Retour") }}
      </a>
    </div>

  </div>

</div>

{% endblock %}
