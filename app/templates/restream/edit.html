{% extends "base.html" %}

{% block title %}
{{ _("Modifier le restream") }}
{% endblock %}

{% block content %}

<div class="restream-edit-page">

  <h1>{{ _("Modifier le restream") }}</h1>

  <form method="post" class="restream-edit-form">

    <!-- TITLE -->
    <div class="form-group">
      <label for="title">{{ _("Titre du restream") }}</label>
      <input
        type="text"
        name="title"
        id="title"
        value="{{ restream.title }}"
        required
      >
    </div>
	
	<!-- TRACKER TYPE -->
    <div class="form-group">
      <label for="tracker_type">{{ _("Tracker") }}</label>
      <select name="tracker_type" id="tracker_type" required>

        <option value="none"
          {% if restream.tracker_type == "none" %}selected{% endif %}
        >
          {{ _("Aucun tracker") }}
        </option>

        {% if available_tracker_types %}
          {% for tracker in available_tracker_types %}
            <option value="{{ tracker.key }}"
              {% if restream.tracker_type == tracker.key %}selected{% endif %}
            >
              {{ tracker.label }}
            </option>
          {% endfor %}
        {% endif %}

      </select>
    </div>

    <!-- INDICES TEMPLATE -->
    <div class="form-group">
      <label for="indices_template">{{ _("Indices") }}</label>
      <select name="indices_template" id="indices_template" required>

        <option value="none"
          {% if restream.indices_template == "none" %}selected{% endif %}
        >
          {{ _("Aucun indice") }}
        </option>

        {% if available_indices_templates %}
          {% for tpl in available_indices_templates %}
            <option value="{{ tpl.key }}"
              {% if restream.indices_template == tpl.key %}selected{% endif %}
            >
              {{ tpl.label }}
            </option>
          {% endfor %}
        {% endif %}

      </select>
    </div>

    <!-- TWITCH -->
    <div class="form-group">
      <label for="twitch_url">{{ _("Lien Twitch") }}</label>
      <input
        type="url"
        name="twitch_url"
        id="twitch_url"
        value="{{ restream.twitch_url or '' }}"
        placeholder="https://twitch.tv/…"
      >
    </div>

    <h2>{{ _("Équipe du restream") }}</h2>

    <!-- NAMES -->
    <div class="form-group">
      <label for="restreamer_name">{{ _("Restream") }}</label>
      <input
        type="text"
        name="restreamer_name"
        id="restreamer_name"
        value="{{ restream.restreamer_name or '' }}"
      >
    </div>

    <div class="form-group">
      <label for="commentator_name">{{ _("Commentaires") }}</label>
      <input
        type="text"
        name="commentator_name"
        id="commentator_name"
        value="{{ restream.commentator_name or '' }}"
      >
    </div>

    <div class="form-group">
      <label for="tracker_name">{{ _("Tracking") }}</label>
      <input
        type="text"
        name="tracker_name"
        id="tracker_name"
        value="{{ restream.tracker_name or '' }}"
      >
    </div>

    <!-- ACTIONS -->
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        {{ _("Enregistrer") }}
      </button>

      <a href="{{ url_for('restream.manage') }}" class="btn btn-secondary">
        {{ _("Annuler") }}
      </a>
    </div>

  </form>

</div>

{% endblock %}
