{% extends "base.html" %}
{% block title %}
    {{ _("Modifier un joueur") if player else _("Ajouter un joueur") }}
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/features/admin.css') }}">
{% endblock %}

{% block content %}

<h1>
    {{ _("Modifier un joueur") if player else _("Ajouter un joueur") }}
</h1>

<div class="admin-card">

    <!-- FORMULAIRE PRINCIPAL -->
    <form method="post" class="admin-form">

        <div class="admin-form-group">
            <label for="name">{{ _("Nom du joueur") }}</label>
            <input type="text"
                   id="name"
                   name="name"
                   class="admin-input"
                   value="{{ player.name if player else '' }}"
                   required>
        </div>

        <div class="admin-form-group">
            <label for="racetime_user">{{ _("Racetime user") }}</label>
            <input type="text"
                   id="racetime_user"
                   name="racetime_user"
                   class="admin-input"
                   value="{{ player.racetime_user if player and player.racetime_user else '' }}"
                   placeholder="{{ _('username#1234') }}">
            <p class="admin-help">
                {{ _("Identifiant racetime au format <code>username#1234</code> (optionnel).") }}
            </p>
        </div>

        <div class="admin-form-actions">
            <button type="submit" class="btn btn-primary">
                {{ _("Enregistrer") }}
            </button>

            <a href="{{ url_for('admin.players_list') }}"
               class="btn btn-secondary">
                {{ _("Annuler") }}
            </a>
        </div>

    </form>

    {% if player %}
    <hr>

    <!-- SUPPRESSION -->
    <h3>{{ _("Suppression") }}</h3>

    {% if can_delete %}
        <p class="admin-warning">
            {{ _("Cette action est définitive.") }}
        </p>

        <form method="post"
              action="{{ url_for('admin.players_delete', player_id=player.id) }}"
              onsubmit="return confirm('Supprimer définitivement ce joueur ?');">

            <button type="submit" class="btn btn-danger">
                {{ _("Supprimer le joueur") }}
            </button>
        </form>
    {% else %}
        <p class="admin-info">
            {{ _("Ce joueur est utilisé dans des équipes, tournois ou matchs.") }}
            {{ _("La suppression est impossible.") }}
        </p>
    {% endif %}
    {% endif %}

</div>

{% endblock %}
