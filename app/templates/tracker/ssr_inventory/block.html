{# 
  Rendu du tracker SSR Inventory
  Ce template est inclus par live.html via tracker.frontend.template_block
#}

{% from "restream/_tracker_ssr_macro.html" import render_tracker with context %}

<div class="tracker-slots-grid">

  {% for p in tracker.session["participants"] %}
  
	{% if overlay_slot is not defined or p.slot == overlay_slot %}
    <div class="tracker-slot">

      {# Label du participant #}
      {% if p.label %}
        <h2>{{ p.label }}</h2>
      {% endif %}

      {# Rendu du tracker SSR #}
      {{ render_tracker(
          p,
          tracker.tracker_type,
          tracker.catalog,
          tracker.use_storage,
          tracker.update_url
      ) }}

		{# Go Mode toggle (UI séparée) #}
        <button
          type="button"
          class="tracker-go-toggle"
          data-go-slot="{{ p.slot }}"
          aria-label="Go mode"
        >
          <img
            class="tracker-go-toggle__img"
            data-go-asset-0="/static/{{ tracker.catalog.asset_dir }}/go0.png"
            data-go-asset-1="/static/{{ tracker.catalog.asset_dir }}/go1.png"
            src="/static/{{ tracker.catalog.asset_dir }}/go{{ 1 if p.gomode else 0 }}.png"
            alt=""
          >
        </button>

    </div>
  {% endif %}
  {% endfor %}

</div>
